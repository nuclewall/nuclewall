<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE packagegui SYSTEM "../schema/packages.dtd">
<?xml-stylesheet type="text/xsl" href="../xsl/package.xsl"?>
<packagegui>
    <description>Squid</description>
	<name>squid</name>
	<title>Proxy Server: General Settings</title>
	<include_file>/usr/local/pkg/squid.inc</include_file>
	<tabs>
		<tab>
			<text>General</text>
			<url>/pkg_edit.php?xml=squid.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>Cache</text>
			<url>/pkg_edit.php?xml=squid_cache.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>General Filter Rules</text>
			<url>/pkg_edit.php?xml=squidguard_default.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>Custom Filter Rules</text>
			<url>/pkg.php?xml=squidguard_acl.xml</url>
		</tab>
	</tabs>
	<fields>
		<field>
			<fielddescr>Enabled</fielddescr>
			<fieldname>squid_enabled</fieldname>
			<description>Enable Proxy Server.</description>
			<type>checkbox</type>
			<default_value>off</default_value>
		</field>
		<field>
			<fielddescr>Proxy Web Filter</fielddescr>
			<fieldname>squidguard_enabled</fieldname>
			<description>Enable Proxy Web Filter.</description>
			<type>checkbox</type>
			<default_value>off</default_value>
		</field>
		<field>
			<fielddescr>Proxy Interface</fielddescr>
			<fieldname>active_interface</fieldname>
			<description>The interface(s) the proxy server will bind to.</description>
			<type>interfaces_selection</type>
			<required/>
			<default_value>lan</default_value>
			<multiple/>
		</field>
		<field>
			<fielddescr>Bypass proxy for these source IPs</fielddescr>
			<fieldname>defined_ip_proxy_off</fieldname>
			<description>Do not forward traffic from these &lt;b&gt;source&lt;/b&gt; IPs, CIDR nets, hostnames,
			 or aliases through the proxy server but directly through the firewall.
			 Separate by semi-colons (;). [Applies only to transparent mode]</description>
			<type>textarea</type>
			<cols>50</cols>
			<rows>5</rows>
		</field>
		<field>
			<fielddescr>Bypass proxy for these destination IPs</fielddescr>
			<fieldname>defined_ip_proxy_off_dest</fieldname>
			<description>Do not proxy traffic going to these &lt;b&gt;destination&lt;/b&gt; IPs, CIDR nets, hostnames,
			 or aliases, but let it pass directly through the firewall.
			Separate by semi-colons (;). [Applies only to transparent mode]</description>
			<type>textarea</type>
			<cols>50</cols>
			<rows>5</rows>
		</field>
		<field>
			<fielddescr>Enabled logging</fielddescr>
			<fieldname>log_enabled</fieldname>
			<description>This will enable the access log. Don't switch this on if you don't have much disk space left.</description>
			<type>checkbox</type>
			<enablefields>log_query_terms,log_user_agents</enablefields>
		</field>
		<field>
			<fielddescr>Log Store Directory</fielddescr>
			<fieldname>log_dir</fieldname>
			<description>The directory where the log will be stored (note: do not end with a / mark)</description>
			<type>input</type>
			<required/>
			<default_value>/var/squid/logs</default_value>
			<class>input-medium</class>
		</field>
		<field>
			<fielddescr>Log Rotate</fielddescr>
			<fieldname>log_rotate</fieldname>
			<description>Defines how many days of logfiles will be kept. Rotation is disabled if left empty.</description>
			<type>input</type>
			<class>input-small</class>
		</field>
		<field>
			<fielddescr>Proxy Port</fielddescr>
			<fieldname>proxy_port</fieldname>
			<description>This is the port the proxy server will listen on.</description>
			<type>input</type>
			<required/>
			<default_value>3128</default_value>
			<class>input-small</class>
		</field>
		<field>
			<fielddescr>Admin E-mail</fielddescr>
			<fieldname>admin_email</fieldname>
			<description>This is the email address displayed in error messages to the users.</description>
			<type>input</type>
			<class>input-medium</class>
			<default_value>admin@nuclewall</default_value>
		</field>
		<field>
			<fielddescr>Language</fielddescr>
			<fieldname>error_language</fieldname>
			<description>Select the language in which the proxy server will display error messages to users.</description>
			<type>select</type>
			<default_value>English</default_value>
		</field>
		<field>
			<fielddescr>Custom Options</fielddescr>
			<fieldname>custom_options</fieldname>
			<description>
			Put your own custom options here,one per line. They'll be added to the configuration.<br>
			<strong>They need to be squid.conf native options, otherwise squid will NOT work.</strong>
			</description>
			<type>textarea</type>
		</field>
	</fields>
	<custom_php_command_before_form>
		squid_before_form_general(&amp;$pkg);
	</custom_php_command_before_form>
	<custom_add_php_command>
		squid_init();
	</custom_add_php_command>
	<custom_php_validation_command>
		squid_validate_general($_POST, &amp;$input_errors);
	</custom_php_validation_command>
	<custom_php_resync_config_command>
		squid_init();
	</custom_php_resync_config_command>
	<filter_rules_needed>squid_generate_rules</filter_rules_needed>
</packagegui>