<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE packagegui SYSTEM "../schema/packages.dtd">
<?xml-stylesheet type="text/xsl" href="../xsl/package.xsl"?>
<packagegui>
    <description>Describe your package here</description>
    <requirements>Describe your package requirements here</requirements>
    <faq>Currently there are no FAQ items provided.</faq>
	<name>squidcache</name>
	<version>none</version>
	<title>Proxy Sunucu: ÖNBELLEK YÖNETİMİ</title>
	<include_file>/usr/local/pkg/squid.inc</include_file>
	<tabs>
		<tab>
			<text>Genel</text>
			<url>/pkg_edit.php?xml=squid.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>Önbellek</text>
			<url>/pkg_edit.php?xml=squid_cache.xml&amp;id=0</url>
			<active/>
		</tab>
		<tab>
			<text>Genel Filtre Kuralları</text>
			<url>/pkg_edit.php?xml=squidguard_default.xml&amp;id=0</url>
		</tab>
		<tab>
			<text>Özel Filtre Kuralları</text>
			<url>/pkg.php?xml=squidguard_acl.xml</url>
		</tab>
	</tabs>
	<fields>
		<field>
			<fielddescr>Hard Disk Önbellek Boyutu</fielddescr>
			<fieldname>harddisk_cache_size</fieldname>
			<description>Önbelleğe alınacak dosyalar için hard diskte ayrılacak alanı &lt;b&gt;MB&lt;/b&gt; cinsinden belirtebilirsiniz.</description>
			<type>input</type>
			<required/>
			<default_value>4096</default_value>
			<class>input-small</class>
		</field>	
		<field>
			<fielddescr>Hard Disk Önbellek Dizini</fielddescr>
			<fieldname>harddisk_cache_location</fieldname>
			<description>Önbelleğin tutulacağı dizini belirtebilirsiniz. Mevcut dizini değiştirirseniz önbellek yeniden yapılandırılacağı için biraz zaman alabilir. (Dizin sonuna "/" işareti koymayın.)</description>
			<type>input</type>
			<class>input-medium</class>
			<required/>
			<default_value>/var/squid/cache</default_value>
		</field>
		<field>
			<fielddescr>RAM Önbellek Boyutu</fielddescr>
			<fieldname>memory_cache_size</fieldname>
			<description>RAM'de tutulacak önbellek boyutunu &lt;b&gt;MB&lt;/b&gt; cinsinden belirtebilirsiniz.&lt;br&gt;En az 1 MB, en fazla RAM miktarınızın yarısı kadar olmalıdır.</description>
			<type>input</type>
			<required/>
			<default_value>8</default_value>
			<class>input-small</class>
		</field>
		<field>
			<fielddescr>En Küçük Nesne Boyutu</fielddescr>
			<fieldname>minimum_object_size</fieldname>
			<description>Belirtilen boyutun altındaki nesneler önbelleğe alınmayacaktır. Birim: &lt;b&gt;KB&lt;/b&gt;</description>
			<type>input</type>
			<required />
			<default_value>0</default_value>
			<class>input-small</class>
		</field>
		<field>
			<fielddescr>En Büyük Nesne Boyutu</fielddescr>
			<fieldname>maximum_object_size</fieldname>
			<description>Belirtilen boyutun üstündeki nesneler önbelleğe alınmayacaktır. Birim: &lt;b&gt;KB&lt;/b&gt;&lt;br&gt;Bant genişliğinden kazanmak istiyorsanız büyük, hızdan kazanmak istiyorsanız küçük değerler girin.</description>
			<type>input</type>
			<required/>
			<default_value>1024</default_value>
			<class>input-small</class>
		</field>
		<field>
			<fielddescr>RAM'deki En Büyük Nesne Boyutu</fielddescr>
			<fieldname>maximum_objsize_in_mem</fieldname>
			<description>Belirtilen boyutun altındaki nesneler RAM'de tutulacaktır. Birim: &lt;b&gt;KB&lt;/b&gt;</description>
			<type>input</type>
			<required/>
			<default_value>32</default_value>
			<class>input-small</class>
		</field>		
		<field>
			<fielddescr>Alt Klasör Sayısı</fielddescr>
			<fieldname>level1_subdirs</fieldname>
			<description>Her bölüm için 256 alt klasör oluşturulacaktır. Yani 16'yı seçerseniz, önbellek için toplam 16x256 klasör oluşturulacak.&lt;br&gt;Bölüm sayısı arttıkça yapılandırma süresi de artacaktır.</description>
			<type>select</type>
			<default_value>16</default_value>
			<options>
				<option><name>4</name><value>4</value></option>
				<option><name>8</name><value>8</value></option>
				<option><name>16</name><value>16</value></option>
				<option><name>32</name><value>32</value></option>
				<option><name>64</name><value>64</value></option>
				<option><name>128</name><value>128</value></option>
				<option><name>256</name><value>256</value></option>
			</options>
		</field>
	</fields>
	<custom_php_command_before_form>
		if($_POST['harddisk_cache_size'] != $config['installedpackages']['squidcache']['config'][0]['harddisk_cache_size']) {
			$needs_dash_z = true;
		}
	</custom_php_command_before_form>
	<custom_php_validation_command>
		squid_validate_cache($_POST, &amp;$input_errors);
	</custom_php_validation_command>
	<custom_php_resync_config_command>
		squid_resync();
		if($needs_dash_z)
		squid_dash_z();
	</custom_php_resync_config_command>
</packagegui>
