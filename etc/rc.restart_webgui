#!/usr/local/bin/php -f

<?php

require("config.inc");
require("functions.inc");
require("shaper.inc");
require("captiveportal.inc");

$fp = fopen('php://stdin', 'r');

echo "    Restarting Web UI...\n";

sigkillbyname("lighttpd", "KILL");

while (is_process_running("lighttpd")) {
        echo '.';
        sleep(1);
}

system_webgui_start();

captiveportal_init_webgui();

echo "\n    Restarted successfully.\n\n    Press <ENTER> to continue. ";
fgets($fp);
fclose($fp);
exit;

?>
